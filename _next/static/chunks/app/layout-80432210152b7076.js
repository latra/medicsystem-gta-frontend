(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[177],{347:()=>{},2093:e=>{e.exports={style:{fontFamily:"'Geist', 'Geist Fallback'",fontStyle:"normal"},className:"__className_013ce9",variable:"__variable_013ce9"}},5731:(e,t,r)=>{"use strict";r.d(t,{AL:()=>h,BF:()=>y,Dk:()=>c,H2:()=>s,L5:()=>l,WB:()=>u,_m:()=>m,h$:()=>i,kE:()=>p,wt:()=>d,xL:()=>f});var n=r(7223);let o=r(9509).env.NEXT_PUBLIC_API_URL||"http://localhost:8000";async function a(){let e=0;for(;e<10;){let t=n.j.currentUser;if(t)try{let e=await t.getIdToken();return console.log("Auth token obtained successfully"),e}catch(e){return console.error("Error getting auth token:",e),null}await new Promise(e=>setTimeout(e,100)),e++}return console.warn("No user found after waiting for auth to initialize"),null}async function s(e,t={}){let r=await a(),n={"Content-Type":"application/json",...t.headers};r?(n.Authorization=`Bearer ${r}`,console.log(`API call to ${e} with auth token`)):console.warn(`No authentication token available for API call to: ${e}`);let i=`${o}${e}`;console.log("Making API call to:",i,"with token:",r?"Present":"Missing");let l=await fetch(i,{...t,headers:n});if(!l.ok){let t=`API call failed: ${l.status} ${l.statusText}`;console.error(t,"for endpoint:",e);try{let e=await l.text();console.error("Error response body:",e)}catch(e){console.error("Could not read error response body")}throw Error(t)}return l.json()}async function i(){return s("/doctor/me")}async function l(){return s("/patients/")}async function c(e){return s(`/patients/${e}`,{method:"DELETE"})}async function u(e){return s("/patients/",{method:"POST",body:JSON.stringify({...e,phone:e.phone||"",allergies:e.allergies||"",medical_notes:e.medical_notes||"",notes:e.notes||""})})}async function d(e){return s(`/visit/${e}`)}async function h(e){return s(`/visit/info/${e}`)}async function f(e,t){return s(`/visit/${e}`,{method:"PUT",body:JSON.stringify(t)})}async function m(e){return s("/visit/",{method:"POST",body:JSON.stringify(e)})}async function p(e){return s(`/visit/${e}/discharge`,{method:"PUT"})}async function y(){return s("/patients/admitted")}},7223:(e,t,r)=>{"use strict";r.d(t,{j:()=>s});var n=r(3915),o=r(5404);let a=(0,n.Wp)({apiKey:"AIzaSyDEENgDXYMxIgTPwEFbyRhw8z9JKd3BP_o",authDomain:"real-hospital-app.firebaseapp.com",projectId:"real-hospital-app",storageBucket:"real-hospital-app.firebasestorage.app",messagingSenderId:"1089927476854",appId:"1:1089927476854:web:dd6373267ceeefcfcdd157"}),s=(0,o.xI)(a)},7735:e=>{e.exports={style:{fontFamily:"'Geist Mono', 'Geist Mono Fallback'",fontStyle:"normal"},className:"__className_c6e698",variable:"__variable_c6e698"}},7877:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,2093,23)),Promise.resolve().then(r.t.bind(r,7735,23)),Promise.resolve().then(r.bind(r,9740)),Promise.resolve().then(r.bind(r,8887)),Promise.resolve().then(r.t.bind(r,347,23))},8887:(e,t,r)=>{"use strict";r.d(t,{A:()=>d,AuthProvider:()=>u});var n=r(5155),o=r(2115),a=r(5404),s=r(7223),i=r(5731),l=r(5695);let c=(0,o.createContext)(void 0);function u({children:e}){let[t,r]=(0,o.useState)(null),[u,d]=(0,o.useState)(null),[h,f]=(0,o.useState)(!0),m=(0,l.useRouter)();(0,o.useEffect)(()=>{let e=(0,a.hg)(s.j,async e=>{if(e)try{let e=await (0,i.h$)();d(e)}catch(e){console.error("Error fetching doctor data:",e),(e.message?.includes("401")||e.message?.includes("Unauthorized"))&&console.error("Authentication failed for doctor data. User may need to re-authenticate."),d(null)}else d(null);setTimeout(()=>{r(e),f(!1)},500)});return()=>e()},[]);let p=async(e,t)=>{try{await (0,a.x9)(s.j,e,t).then(()=>{m.push("/")})}catch(e){throw console.error("Error signing in:",e),e}},y=async(e,t)=>{try{await (0,a.eJ)(s.j,e,t)}catch(e){throw console.error("Error signing up:",e),e}},g=async()=>{try{await (0,a.CI)(s.j),d(null)}catch(e){console.error("Error signing out:",e)}};return(0,n.jsx)(c.Provider,{value:{user:t,doctor:u,loading:h,logout:g,signIn:p,signUp:y},children:e})}function d(){let e=(0,o.useContext)(c);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},9740:(e,t,r)=>{"use strict";r.d(t,{default:()=>a});var n=r(5155),o=r(8887);function a(){let{loading:e}=(0,o.A)();return e?(0,n.jsx)("div",{className:"fixed inset-0 bg-white z-50 flex items-center justify-center",children:(0,n.jsxs)("div",{className:"text-center",children:[(0,n.jsx)("img",{className:"mx-auto h-32 w-auto mb-8 animate-pulse",src:"/hosp-logo.png",alt:"Hospital General de Real"}),(0,n.jsx)("img",{className:"mx-auto h-16 w-auto mb-8",src:"/hosp-title.png",alt:"Hospital General de Real"}),(0,n.jsx)("div",{className:"flex justify-center",children:(0,n.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-4 border-hospital-blue border-t-transparent"})}),(0,n.jsx)("p",{className:"mt-4 text-gray-600 text-lg",children:"Cargando..."})]})}):null}}},e=>{e.O(0,[360,965,404,441,964,358],()=>e(e.s=7877)),_N_E=e.O()}]);