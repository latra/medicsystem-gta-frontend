(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[773],{33:(e,s,a)=>{Promise.resolve().then(a.bind(a,3049))},3049:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>E});var r=a(5155),t=a(2115),l=a(1458),n=a(5731);let i=t.forwardRef(function({title:e,titleId:s,...a},r){return t.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":s},a),e?t.createElement("title",{id:s},e):null,t.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m21 21-5.197-5.197m0 0A7.5 7.5 0 1 0 5.196 5.196a7.5 7.5 0 0 0 10.607 10.607Z"}))}),o=t.forwardRef(function({title:e,titleId:s,...a},r){return t.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":s},a),e?t.createElement("title",{id:s},e):null,t.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 19.5 8.25 12l7.5-7.5"}))}),d=t.forwardRef(function({title:e,titleId:s,...a},r){return t.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":s},a),e?t.createElement("title",{id:s},e):null,t.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m8.25 4.5 7.5 7.5-7.5 7.5"}))});var c=a(8887);function m({onPatientDetails:e,refreshTrigger:s,onPatientDelete:a}){let{user:l,loading:m}=(0,c.A)(),[u,x]=(0,t.useState)([]),[b,g]=(0,t.useState)(!0),[h,p]=(0,t.useState)(null),[f,y]=(0,t.useState)(1),[j,v]=(0,t.useState)(""),N=(0,t.useCallback)(async()=>{if(!m&&l)try{g(!0);let e=await (0,n.L5)();x(e),p(null)}catch(e){console.error("Error fetching patients:",e),e.message?.includes("401")||e.message?.includes("Unauthorized")?p("Error de autenticaci\xf3n. Por favor, inicie sesi\xf3n nuevamente."):e.message?.includes("403")||e.message?.includes("Forbidden")?p("No tiene permisos para acceder a esta informaci\xf3n."):e.message?.includes("500")||e.message?.includes("Internal Server Error")?p("Error del servidor. Por favor, intente m\xe1s tarde."):p("Error al cargar los pacientes. Verifique su conexi\xf3n.")}finally{g(!1)}},[l,m]);(0,t.useEffect)(()=>{!m&&l&&N()},[N,m,l]),(0,t.useEffect)(()=>{s&&!m&&l&&N()},[s,N,m,l]);let w=(0,t.useMemo)(()=>{if(!j.trim())return u;let e=j.toLowerCase();return u.filter(s=>s.name.toLowerCase().includes(e)||s.dni.toLowerCase().includes(e))},[u,j]),k=Math.ceil(w.length/20),C=(f-1)*20,_=C+20,E=w.slice(C,_),S=e=>{y(e)};return m?(0,r.jsx)("div",{className:"flex justify-center items-center h-64",children:(0,r.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-hospital-blue"})}):l?b?(0,r.jsx)("div",{className:"flex justify-center items-center h-64",children:(0,r.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-hospital-blue"})}):h?(0,r.jsx)("div",{className:"bg-red-50 border border-red-200 rounded-md p-4",children:(0,r.jsx)("div",{className:"flex",children:(0,r.jsx)("div",{className:"ml-3",children:(0,r.jsx)("h3",{className:"text-sm font-medium text-red-800",children:h})})})}):(0,r.jsxs)("div",{className:"bg-white shadow-sm rounded-lg",children:[(0,r.jsx)("div",{className:"p-6 border-b border-gray-200",children:(0,r.jsx)("div",{className:"flex flex-col sm:flex-row gap-4",children:(0,r.jsx)("div",{className:"flex-1",children:(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,r.jsx)(i,{className:"h-5 w-5 text-gray-400"})}),(0,r.jsx)("input",{type:"text",placeholder:"Buscar por nombre o DNI...",value:j,onChange:e=>{v(e.target.value),y(1)},className:"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md leading-5 bg-white placeholder-gray-500 focus:outline-none focus:ring-[#4fbbeb] focus:border-[#4fbbeb] sm:text-sm"})]})})})}),(0,r.jsx)("div",{className:"overflow-x-auto",children:(0,r.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,r.jsx)("thead",{className:"bg-gray-50",children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Nombre"}),(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"DNI"}),(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Acciones"})]})}),(0,r.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:0===E.length?(0,r.jsx)("tr",{children:(0,r.jsx)("td",{colSpan:3,className:"px-6 py-4 text-center text-gray-500",children:j?"No se encontraron pacientes con los criterios de b\xfasqueda":"No hay pacientes registrados"})}):E.map(s=>(0,r.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:s.name}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:s.dni}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:(0,r.jsxs)("div",{className:"flex space-x-3",children:[(0,r.jsx)("button",{onClick:()=>{console.log("Button clicked for patient:",s.name),e(s)},className:"text-hospital-blue hover:text-hospital-blue/80 font-medium focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-[#4fbbeb]",children:"M\xe1s detalles"}),(0,r.jsx)("button",{onClick:()=>a(s),className:"text-red-600 hover:text-red-800 font-medium focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500",children:"Eliminar"})]})})]},s.dni))})]})}),k>1&&(0,r.jsxs)("div",{className:"bg-white px-4 py-3 flex items-center justify-between border-t border-gray-200 sm:px-6",children:[(0,r.jsxs)("div",{className:"flex-1 flex justify-between sm:hidden",children:[(0,r.jsx)("button",{onClick:()=>S(f-1),disabled:1===f,className:"relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-[#4fbbeb]",children:"Anterior"}),(0,r.jsx)("button",{onClick:()=>S(f+1),disabled:f===k,className:"ml-3 relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-[#4fbbeb]",children:"Siguiente"})]}),(0,r.jsxs)("div",{className:"hidden sm:flex-1 sm:flex sm:items-center sm:justify-between",children:[(0,r.jsx)("div",{children:(0,r.jsxs)("p",{className:"text-sm text-gray-700",children:["Mostrando"," ",(0,r.jsx)("span",{className:"font-medium",children:C+1})," ","a"," ",(0,r.jsx)("span",{className:"font-medium",children:Math.min(_,w.length)})," ","de"," ",(0,r.jsx)("span",{className:"font-medium",children:w.length})," ","resultados"]})}),(0,r.jsx)("div",{children:(0,r.jsxs)("nav",{className:"relative z-0 inline-flex rounded-md shadow-sm -space-x-px",children:[(0,r.jsxs)("button",{onClick:()=>S(f-1),disabled:1===f,className:"relative inline-flex items-center px-2 py-2 rounded-l-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-[#4fbbeb]",children:[(0,r.jsx)("span",{className:"sr-only",children:"Anterior"}),(0,r.jsx)(o,{className:"h-5 w-5"})]}),Array.from({length:Math.min(5,k)},(e,s)=>{let a;return a=k<=5||f<=3?s+1:f>=k-2?k-4+s:f-2+s,(0,r.jsx)("button",{onClick:()=>S(a),className:`relative inline-flex items-center px-4 py-2 border text-sm font-medium ${f===a?"z-10 bg-hospital-blue border-hospital-blue text-white":"bg-white border-gray-300 text-gray-500 hover:bg-gray-50"} focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-[#4fbbeb]`,children:a},a)}),(0,r.jsxs)("button",{onClick:()=>S(f+1),disabled:f===k,className:"relative inline-flex items-center px-2 py-2 rounded-r-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-[#4fbbeb]",children:[(0,r.jsx)("span",{className:"sr-only",children:"Siguiente"}),(0,r.jsx)(d,{className:"h-5 w-5"})]})]})})]})]})]}):(0,r.jsx)("div",{className:"bg-red-50 border border-red-200 rounded-md p-4",children:(0,r.jsx)("div",{className:"flex",children:(0,r.jsx)("div",{className:"ml-3",children:(0,r.jsx)("h3",{className:"text-sm font-medium text-red-800",children:"Debe iniciar sesi\xf3n para ver los pacientes."})})})})}let u=t.forwardRef(function({title:e,titleId:s,...a},r){return t.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":s},a),e?t.createElement("title",{id:s},e):null,t.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4.5v15m7.5-7.5h-15"}))});var x=a(1316),b=a(4500),g=a(4170),h=a(2771),p=a(1157);let f=[{value:"street",label:"Calle"},{value:"hospital",label:"Hospital"},{value:"traslad",label:"Traslado"}],y=[{value:"conscious",label:"Consciente"},{value:"unconscious",label:"Inconsciente"},{value:"in_danger",label:"En Peligro"},{value:"stable",label:"Estable"},{value:"critical",label:"Cr\xedtico"}],j=[{value:"unknown",label:"Desconocido",color:"bg-gray-100 text-gray-800"},{value:"green",label:"Verde",color:"bg-green-100 text-green-800"},{value:"yellow",label:"Amarillo",color:"bg-yellow-100 text-yellow-800"},{value:"red",label:"Rojo",color:"bg-red-100 text-red-800"},{value:"black",label:"Negro",color:"bg-black text-white"}];function v({patientDni:e,patientName:s,isOpen:a,onClose:l,onVisitCreated:i}){let[o,d]=(0,t.useState)({patient_dni:e,reason:"",attention_type:"street",location:"",admission_status:"conscious",admission_heart_rate:void 0,admission_blood_pressure:void 0,admission_temperature:void 0,admission_oxygen_saturation:void 0,triage:"unknown"}),[c,m]=(0,t.useState)(!1),[x,g]=(0,t.useState)(null),h=e=>{let{name:s,value:a}=e.target;d(e=>({...e,[s]:a}))},p=e=>{let{name:s,value:a}=e.target;d(e=>({...e,[s]:""===a?void 0:Number(a)}))},v=async s=>{s.preventDefault(),m(!0),g("");try{if(!o.reason||!o.location)throw Error("Por favor completa todos los campos obligatorios");await (0,n._m)(o),d({patient_dni:e,reason:"",attention_type:"street",location:"",admission_status:"conscious",admission_heart_rate:void 0,admission_blood_pressure:void 0,admission_temperature:void 0,admission_oxygen_saturation:void 0,triage:"unknown"}),i?.(),l()}catch(e){console.error("Error creating visit:",e),g(e.message||"Error al crear la visita")}finally{m(!1)}},N=()=>{c||l()};return a?(0,r.jsxs)("div",{className:"fixed inset-0 z-[9999] flex items-center justify-center p-4",children:[(0,r.jsx)("div",{className:"absolute inset-0 bg-black/50",onClick:N}),(0,r.jsxs)("div",{className:"relative bg-white shadow-sm rounded-lg max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[(0,r.jsx)("div",{className:"bg-hospital-blue text-white p-6 rounded-t-lg",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-lg font-semibold",children:"Ingresar Paciente"}),(0,r.jsxs)("p",{className:"text-gray-300 text-sm mt-1",children:[s," - ",e]})]}),(0,r.jsx)("button",{onClick:N,disabled:c,className:"text-gray-300 hover:text-white p-2 rounded-md transition-colors disabled:opacity-50",children:(0,r.jsx)(b.A,{className:"h-5 w-5"})})]})}),(0,r.jsxs)("form",{onSubmit:v,className:"p-6",children:[x&&(0,r.jsx)("div",{className:"bg-red-50 border border-red-200 rounded-md p-4 mb-6",children:(0,r.jsx)("p",{className:"text-sm text-red-800",children:x})}),(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"bg-gray-50 rounded-lg p-6 border border-gray-200",children:[(0,r.jsx)("h4",{className:"text-sm font-medium text-gray-500 uppercase tracking-wide mb-4",children:"Informaci\xf3n de la Visita"}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Motivo de Atenci\xf3n *"}),(0,r.jsx)("textarea",{name:"reason",value:o.reason,onChange:h,rows:3,required:!0,className:"block w-full px-3 py-2 border border-gray-300 rounded-md leading-5 bg-white placeholder-gray-500 focus:outline-none focus:ring-[#4fbbeb] focus:border-[#4fbbeb] text-sm resize-none",placeholder:"Describa el motivo de la atenci\xf3n..."})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Tipo de Atenci\xf3n *"}),(0,r.jsx)("select",{name:"attention_type",value:o.attention_type,onChange:h,required:!0,className:"block w-full px-3 py-2 border border-gray-300 rounded-md leading-5 bg-white focus:outline-none focus:ring-[#4fbbeb] focus:border-[#4fbbeb] text-sm",children:f.map(e=>(0,r.jsx)("option",{value:e.value,children:e.label},e.value))})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Ubicaci\xf3n *"}),(0,r.jsx)("input",{type:"text",name:"location",value:o.location,onChange:h,required:!0,className:"block w-full px-3 py-2 border border-gray-300 rounded-md leading-5 bg-white placeholder-gray-500 focus:outline-none focus:ring-[#4fbbeb] focus:border-[#4fbbeb] text-sm",placeholder:"Ubicaci\xf3n de la atenci\xf3n..."})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Estado del Paciente"}),(0,r.jsx)("select",{name:"admission_status",value:o.admission_status,onChange:h,className:"block w-full px-3 py-2 border border-gray-300 rounded-md leading-5 bg-white focus:outline-none focus:ring-[#4fbbeb] focus:border-[#4fbbeb] text-sm",children:y.map(e=>(0,r.jsx)("option",{value:e.value,children:e.label},e.value))})]})]})]}),(0,r.jsxs)("div",{className:"bg-gray-50 rounded-lg p-6 border border-gray-200",children:[(0,r.jsx)("h4",{className:"text-sm font-medium text-gray-500 uppercase tracking-wide mb-4",children:"Signos Vitales"}),(0,r.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Frecuencia Card\xedaca"}),(0,r.jsx)("input",{type:"number",name:"admission_heart_rate",value:o.admission_heart_rate||"",onChange:p,className:"block w-full px-3 py-2 border border-gray-300 rounded-md leading-5 bg-white placeholder-gray-500 focus:outline-none focus:ring-[#4fbbeb] focus:border-[#4fbbeb] text-sm",placeholder:"BPM"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Presi\xf3n Arterial"}),(0,r.jsx)("input",{type:"number",name:"admission_blood_pressure",value:o.admission_blood_pressure||"",onChange:p,className:"block w-full px-3 py-2 border border-gray-300 rounded-md leading-5 bg-white placeholder-gray-500 focus:outline-none focus:ring-[#4fbbeb] focus:border-[#4fbbeb] text-sm",placeholder:"mmHg"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Temperatura"}),(0,r.jsx)("input",{type:"number",step:"0.1",name:"admission_temperature",value:o.admission_temperature||"",onChange:p,className:"block w-full px-3 py-2 border border-gray-300 rounded-md leading-5 bg-white placeholder-gray-500 focus:outline-none focus:ring-[#4fbbeb] focus:border-[#4fbbeb] text-sm",placeholder:"\xb0C"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Saturaci\xf3n O2"}),(0,r.jsx)("input",{type:"number",name:"admission_oxygen_saturation",value:o.admission_oxygen_saturation||"",onChange:p,className:"block w-full px-3 py-2 border border-gray-300 rounded-md leading-5 bg-white placeholder-gray-500 focus:outline-none focus:ring-[#4fbbeb] focus:border-[#4fbbeb] text-sm",placeholder:"%"})]})]})]}),(0,r.jsxs)("div",{className:"bg-gray-50 rounded-lg p-6 border border-gray-200",children:[(0,r.jsx)("h4",{className:"text-sm font-medium text-gray-500 uppercase tracking-wide mb-4",children:"Clasificaci\xf3n de Triage"}),(0,r.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-3",children:j.map(e=>(0,r.jsx)("button",{type:"button",onClick:()=>d(s=>({...s,triage:e.value})),className:`px-3 py-2 rounded-md text-sm font-medium transition-colors ${o.triage===e.value?e.color:"bg-white border border-gray-300 text-gray-700 hover:bg-gray-50"}`,children:e.label},e.value))})]})]}),(0,r.jsxs)("div",{className:"bg-gray-50 px-6 py-4 flex justify-end gap-3 rounded-b-lg border-t border-gray-200 mt-6",children:[(0,r.jsx)("button",{type:"button",onClick:N,disabled:c,className:"bg-gray-500 hover:bg-gray-600 text-white font-medium py-2 px-4 rounded-md focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-500 disabled:opacity-50 transition-colors",children:"Cancelar"}),(0,r.jsxs)("button",{type:"submit",disabled:c,className:"bg-hospital-blue hover:bg-hospital-blue/80 text-white font-medium py-2 px-4 rounded-md focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-[#4fbbeb] disabled:opacity-50 transition-colors flex items-center gap-2",children:[(0,r.jsx)(u,{className:"h-4 w-4"}),c?"Creando visita...":"Crear Visita"]})]})]})]})]}):null}function N({patient:e,isOpen:s,onClose:a,onPatientUpdate:l}){let[i,o]=(0,t.useState)(!1),[d,c]=(0,t.useState)(!1),[m,f]=(0,t.useState)(null),[y,j]=(0,t.useState)("info"),[N,w]=(0,t.useState)([]),[k,C]=(0,t.useState)(!1),[_,E]=(0,t.useState)(null),[S,A]=(0,t.useState)(null),[P,I]=(0,t.useState)(!1),[D,O]=(0,t.useState)(!1),B=async()=>{if(e){C(!0),E(null);try{let s=await (0,n.wt)(e.dni);w(s)}catch(e){console.error("Error fetching visits:",e),E("Error al cargar el historial de visitas")}finally{C(!1)}}};if((0,t.useEffect)(()=>{"history"===y&&e&&s&&B()},[y,e,s]),console.log("PatientDetails render:",{isOpen:s,patient:e?.name}),!s||!e)return null;let L=async()=>{if(m){c(!0);try{let s=await (0,n.H2)(`/patients/${e.dni}`,{method:"PUT",body:JSON.stringify({age:m.age,phone:m.phone,allergies:m.allergies,medical_notes:m.medical_notes,notes:m.notes})});l?.(s),o(!1),f(null)}catch(e){console.error("Error updating patient:",e),alert("Error al actualizar el paciente")}finally{c(!1)}}},M=m||e;return(0,r.jsxs)("div",{className:"fixed inset-0 z-[9999] flex items-center justify-center p-4",children:[(0,r.jsx)("div",{className:"absolute inset-0 bg-black/50",onClick:a}),(0,r.jsxs)("div",{className:"relative bg-white shadow-sm rounded-lg max-w-4xl w-full max-h-[85vh] overflow-y-auto",children:[(0,r.jsx)("div",{className:"bg-hospital-blue text-white p-6 rounded-t-lg",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-lg font-semibold",children:"Detalles del Paciente"}),(0,r.jsxs)("p",{className:"text-gray-300 text-sm mt-1",children:[M.name," - ",M.dni]})]}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[!i&&(0,r.jsxs)("button",{onClick:()=>{O(!0)},className:"bg-green-600 hover:bg-green-700 text-white px-3 py-2 rounded-md font-medium transition-colors flex items-center gap-2",title:"Ingresar paciente",children:[(0,r.jsx)(u,{className:"h-4 w-4"}),"Ingresar"]}),!i&&"info"===y&&(0,r.jsx)("button",{onClick:()=>{f({...e}),o(!0)},className:"bg-white/20 hover:bg-white/30 text-white p-2 rounded-md transition-colors",title:"Editar paciente",children:(0,r.jsx)(x.A,{className:"h-4 w-4"})}),(0,r.jsx)("button",{onClick:a,className:"text-gray-300 hover:text-white p-2 rounded-md transition-colors",children:(0,r.jsx)(b.A,{className:"h-5 w-5"})})]})]})}),(0,r.jsx)("div",{className:"border-b border-gray-200",children:(0,r.jsxs)("div",{className:"flex",children:[(0,r.jsxs)("button",{onClick:()=>j("info"),className:`px-6 py-3 text-sm font-medium border-b-2 transition-colors ${"info"===y?"border-hospital-blue text-hospital-blue":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[(0,r.jsx)(g.A,{className:"h-4 w-4 inline mr-2"}),"Informaci\xf3n"]}),(0,r.jsxs)("button",{onClick:()=>j("history"),className:`px-6 py-3 text-sm font-medium border-b-2 transition-colors ${"history"===y?"border-hospital-blue text-hospital-blue":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[(0,r.jsx)(h.A,{className:"h-4 w-4 inline mr-2"}),"Historial"]})]})}),(0,r.jsx)("div",{className:"p-6",children:"info"===y?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"bg-gray-50 rounded-lg p-6 mb-6 border border-gray-200",children:[(0,r.jsx)("h4",{className:"text-sm font-medium text-gray-500 uppercase tracking-wide mb-4",children:"Informaci\xf3n Personal"}),(0,r.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Edad"}),i?(0,r.jsx)("input",{type:"number",value:M.age,onChange:e=>f(s=>s?{...s,age:parseInt(e.target.value)||0}:null),className:"block w-full px-3 py-2 border border-gray-300 rounded-md leading-5 bg-white placeholder-gray-500 focus:outline-none focus:ring-[#4fbbeb] focus:border-[#4fbbeb] text-sm"}):(0,r.jsxs)("p",{className:"text-sm text-gray-900 bg-white px-3 py-2 rounded-md border border-gray-300",children:[M.age," a\xf1os"]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Sexo"}),(0,r.jsx)("p",{className:"text-sm text-gray-900 bg-white px-3 py-2 rounded-md border border-gray-300",children:"male"===M.sex?"Masculino":"Femenino"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Tel\xe9fono"}),i?(0,r.jsx)("input",{type:"tel",value:M.phone,onChange:e=>f(s=>s?{...s,phone:e.target.value}:null),className:"block w-full px-3 py-2 border border-gray-300 rounded-md leading-5 bg-white placeholder-gray-500 focus:outline-none focus:ring-[#4fbbeb] focus:border-[#4fbbeb] text-sm"}):(0,r.jsx)("p",{className:"text-sm text-gray-900 bg-white px-3 py-2 rounded-md border border-gray-300",children:M.phone||"No registrado"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Tipo Sangre"}),(0,r.jsx)("div",{className:"inline-block bg-red-100 text-red-800 px-3 py-2 rounded-md text-sm font-medium",children:M.blood_type})]})]})]}),(0,r.jsxs)("div",{className:"bg-gray-50 rounded-lg p-6 mb-6 border border-gray-200",children:[(0,r.jsx)("h4",{className:"text-sm font-medium text-gray-500 uppercase tracking-wide mb-4",children:"Informaci\xf3n M\xe9dica"}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Alergias"}),i?(0,r.jsx)("textarea",{value:M.allergies,onChange:e=>f(s=>s?{...s,allergies:e.target.value}:null),rows:2,className:"block w-full px-3 py-2 border border-gray-300 rounded-md leading-5 bg-white placeholder-gray-500 focus:outline-none focus:ring-[#4fbbeb] focus:border-[#4fbbeb] text-sm resize-none",placeholder:"Ingrese las alergias..."}):(0,r.jsx)("p",{className:"text-sm text-gray-900 bg-white px-3 py-2 rounded-md border border-gray-300 min-h-[40px] flex items-center",children:M.allergies||"Ninguna alergia registrada"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Notas M\xe9dicas"}),i?(0,r.jsx)("textarea",{value:M.medical_notes,onChange:e=>f(s=>s?{...s,medical_notes:e.target.value}:null),rows:3,className:"block w-full px-3 py-2 border border-gray-300 rounded-md leading-5 bg-white placeholder-gray-500 focus:outline-none focus:ring-[#4fbbeb] focus:border-[#4fbbeb] text-sm resize-none",placeholder:"Ingrese notas m\xe9dicas..."}):(0,r.jsx)("p",{className:"text-sm text-gray-900 bg-white px-3 py-2 rounded-md border border-gray-300 min-h-[60px] whitespace-pre-wrap",children:M.medical_notes||"No hay notas m\xe9dicas registradas"})]})]})]}),(0,r.jsxs)("div",{className:"bg-gray-50 rounded-lg p-6 border border-gray-200",children:[(0,r.jsx)("h4",{className:"text-sm font-medium text-gray-500 uppercase tracking-wide mb-4",children:"Notas Generales"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Observaciones"}),i?(0,r.jsx)("textarea",{value:M.notes,onChange:e=>f(s=>s?{...s,notes:e.target.value}:null),rows:3,className:"block w-full px-3 py-2 border border-gray-300 rounded-md leading-5 bg-white placeholder-gray-500 focus:outline-none focus:ring-[#4fbbeb] focus:border-[#4fbbeb] text-sm resize-none",placeholder:"Ingrese notas generales..."}):(0,r.jsx)("p",{className:"text-sm text-gray-900 bg-white px-3 py-2 rounded-md border border-gray-300 min-h-[60px] whitespace-pre-wrap",children:M.notes||"No hay notas generales registradas"})]})]})]}):(0,r.jsxs)("div",{className:"bg-gray-50 rounded-lg p-6 border border-gray-200",children:[(0,r.jsx)("h4",{className:"text-sm font-medium text-gray-500 uppercase tracking-wide mb-4",children:"Historial de Visitas"}),k?(0,r.jsx)("div",{className:"flex justify-center items-center h-32",children:(0,r.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-hospital-blue"})}):_?(0,r.jsx)("div",{className:"bg-red-50 border border-red-200 rounded-md p-4",children:(0,r.jsx)("p",{className:"text-sm text-red-800",children:_})}):0===N.length?(0,r.jsxs)("div",{className:"text-center py-8",children:[(0,r.jsx)(h.A,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),(0,r.jsx)("p",{className:"text-gray-500",children:"No hay visitas registradas para este paciente"})]}):(0,r.jsx)("div",{className:"overflow-x-auto",children:(0,r.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,r.jsx)("thead",{className:"bg-gray-100",children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Fecha Ingreso"}),(0,r.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Estado"}),(0,r.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Tipo Atenci\xf3n"}),(0,r.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Atendido por"}),(0,r.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Motivo"}),(0,r.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Ubicaci\xf3n"})]})}),(0,r.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:N.map(e=>{var s;return(0,r.jsxs)("tr",{className:"hover:bg-gray-50 cursor-pointer",onClick:()=>{A(e.visit_id),I(!0)},children:[(0,r.jsx)("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-gray-900",children:(s=e.date_of_admission)?new Date(s).toLocaleDateString("es-ES",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"}):"N/A"}),(0,r.jsx)("td",{className:"px-4 py-3 whitespace-nowrap",children:(0,r.jsx)("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${"admission"===e.visit_status?"bg-blue-100 text-blue-800":"discharge"===e.visit_status?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"}`,children:(e=>{switch(e){case"admission":return"Ingreso";case"discharge":return"Alta";case"pending":return"Pendiente";default:return e}})(e.visit_status)})}),(0,r.jsx)("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-gray-900",children:(e=>{switch(e){case"street":return"Calle";case"hospital":return"Hospital";case"traslad":return"Traslado";default:return e}})(e.attention_type)}),(0,r.jsxs)("td",{className:"px-4 py-3 text-sm text-gray-900",children:[e.doctor_dni," | ",e.doctor_name]}),(0,r.jsx)("td",{className:"px-4 py-3 text-sm text-gray-900 max-w-xs truncate",children:e.reason||"No especificado"}),(0,r.jsx)("td",{className:"px-4 py-3 text-sm text-gray-900",children:e.location||"No especificada"})]},e.visit_id)})})]})})]})}),(0,r.jsx)("div",{className:"bg-gray-50 px-6 py-4 flex justify-end gap-3 rounded-b-lg border-t border-gray-200",children:i&&"info"===y?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("button",{type:"button",onClick:()=>{f(null),o(!1)},disabled:d,className:"bg-gray-500 hover:bg-gray-600 text-white font-medium py-2 px-4 rounded-md focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-500 disabled:opacity-50 transition-colors",children:"Cancelar"}),(0,r.jsx)("button",{type:"button",onClick:L,disabled:d,className:"bg-hospital-blue hover:bg-hospital-blue/80 text-white font-medium py-2 px-4 rounded-md focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-[#4fbbeb] disabled:opacity-50 transition-colors",children:d?"Guardando...":"Guardar"})]}):(0,r.jsx)("button",{type:"button",onClick:a,className:"bg-hospital-blue hover:bg-hospital-blue/80 text-white font-medium py-2 px-4 rounded-md focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-[#4fbbeb] transition-colors",children:"Cerrar"})})]}),(0,r.jsx)(p.A,{visitId:S,isOpen:P,onClose:()=>{I(!1),A(null)},onVisitUpdate:()=>{B()}}),(0,r.jsx)(v,{patientDni:e.dni,patientName:e.name,isOpen:D,onClose:()=>{O(!1)},onVisitCreated:()=>{B()}})]})}let w=[{value:"A+",label:"A+"},{value:"A-",label:"A-"},{value:"B+",label:"B+"},{value:"B-",label:"B-"},{value:"AB+",label:"AB+"},{value:"AB-",label:"AB-"},{value:"O+",label:"O+"},{value:"O-",label:"O-"}],k=[{value:"male",label:"Masculino"},{value:"female",label:"Femenino"}];function C({isOpen:e,onClose:s,onPatientCreated:a}){let{user:l,loading:i}=(0,c.A)(),[o,d]=(0,t.useState)({name:"",dni:"",age:"",sex:"",phone:"",blood_type:"",allergies:"",medical_notes:"",notes:""}),[m,u]=(0,t.useState)(!1),[x,b]=(0,t.useState)(""),g=e=>{let{name:s,value:a}=e.target;d(e=>({...e,[s]:a}))},h=async e=>{if(e.preventDefault(),!l)return void b("Debe iniciar sesi\xf3n para registrar pacientes.");u(!0),b("");try{if(!o.name||!o.dni||!o.age||!o.sex||!o.blood_type)throw Error("Por favor completa todos los campos obligatorios");let e={name:o.name,dni:o.dni,age:parseInt(o.age),sex:o.sex,blood_type:o.blood_type,phone:o.phone||void 0,allergies:o.allergies||void 0,medical_notes:o.medical_notes||void 0,notes:o.notes||void 0};await (0,n.WB)(e),d({name:"",dni:"",age:"",sex:"",phone:"",blood_type:"",allergies:"",medical_notes:"",notes:""}),a(),s()}catch(e){b(e instanceof Error?e.message:"Error al crear el paciente")}finally{u(!1)}};return e?i?(0,r.jsx)("div",{className:"fixed inset-0 bg-black/20 flex items-center justify-center z-50",children:(0,r.jsx)("div",{className:"bg-white rounded-lg p-6 w-full max-w-2xl",children:(0,r.jsx)("div",{className:"flex justify-center items-center h-32",children:(0,r.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})})})}):l?(0,r.jsx)("div",{className:"fixed inset-0 bg-black/20 flex items-center justify-center z-50",children:(0,r.jsxs)("div",{className:"bg-white rounded-lg p-6 w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,r.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"Registrar Nuevo Paciente"}),(0,r.jsx)("button",{onClick:s,className:"text-gray-400 hover:text-gray-600 text-2xl font-bold",children:"\xd7"})]}),x&&(0,r.jsx)("div",{className:"mb-4 p-3 bg-red-100 border border-red-400 text-red-700 rounded",children:x}),(0,r.jsxs)("form",{onSubmit:h,className:"space-y-4",children:[(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Nombre * ",(0,r.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,r.jsx)("input",{type:"text",name:"name",value:o.name,onChange:g,required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["DNI * ",(0,r.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,r.jsx)("input",{type:"text",name:"dni",value:o.dni,onChange:g,required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Edad * ",(0,r.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,r.jsx)("input",{type:"number",name:"age",value:o.age,onChange:g,required:!0,min:"0",max:"150",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Sexo * ",(0,r.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,r.jsxs)("select",{name:"sex",value:o.sex,onChange:g,required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,r.jsx)("option",{value:"",children:"Seleccionar sexo"}),k.map(e=>(0,r.jsx)("option",{value:e.value,children:e.label},e.value))]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tel\xe9fono"}),(0,r.jsx)("input",{type:"tel",name:"phone",value:o.phone,onChange:g,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Tipo de Sangre * ",(0,r.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,r.jsxs)("select",{name:"blood_type",value:o.blood_type,onChange:g,required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,r.jsx)("option",{value:"",children:"Seleccionar tipo de sangre"}),w.map(e=>(0,r.jsx)("option",{value:e.value,children:e.label},e.value))]})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Alergias"}),(0,r.jsx)("textarea",{name:"allergies",value:o.allergies,onChange:g,rows:2,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Especificar alergias conocidas..."})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Historial M\xe9dico"}),(0,r.jsx)("textarea",{name:"medical_notes",value:o.medical_notes,onChange:g,rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Informaci\xf3n m\xe9dica relevante..."})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Notas Adicionales"}),(0,r.jsx)("textarea",{name:"notes",value:o.notes,onChange:g,rows:2,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Notas adicionales..."})]}),(0,r.jsxs)("div",{className:"flex justify-end space-x-3 pt-4",children:[(0,r.jsx)("button",{type:"button",onClick:s,className:"px-4 py-2 text-gray-700 bg-gray-200 rounded-md hover:bg-gray-300 focus:outline-none focus:ring-2 focus:ring-gray-500",disabled:m,children:"Cancelar"}),(0,r.jsx)("button",{type:"submit",disabled:m,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:opacity-50",children:m?"Registrando...":"Registrar Paciente"})]})]})]})}):(0,r.jsx)("div",{className:"fixed inset-0 bg-black/20 flex items-center justify-center z-50",children:(0,r.jsx)("div",{className:"bg-white rounded-lg p-6 w-full max-w-2xl",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("h2",{className:"text-xl font-bold text-red-600 mb-4",children:"Error de Autenticaci\xf3n"}),(0,r.jsx)("p",{className:"text-gray-600 mb-4",children:"Debe iniciar sesi\xf3n para registrar pacientes."}),(0,r.jsx)("button",{onClick:s,className:"px-4 py-2 bg-gray-600 text-white rounded-md hover:bg-gray-700",children:"Cerrar"})]})})}):null}function _({patient:e,isOpen:s,onClose:a,onConfirm:l}){let[n,i]=(0,t.useState)(!1),[o,d]=(0,t.useState)(""),c=async()=>{if(e){i(!0),d("");try{await l(e),a()}catch(e){d(e instanceof Error?e.message:"Error al eliminar el paciente")}finally{i(!1)}}};return s&&e?(0,r.jsx)("div",{className:"fixed inset-0 bg-black/20 flex items-center justify-center z-50",children:(0,r.jsxs)("div",{className:"bg-white rounded-lg p-6 w-full max-w-md mx-4",children:[(0,r.jsxs)("div",{className:"flex items-center mb-4",children:[(0,r.jsx)("div",{className:"flex-shrink-0",children:(0,r.jsx)("div",{className:"w-10 h-10 bg-red-100 rounded-full flex items-center justify-center",children:(0,r.jsx)("svg",{className:"w-6 h-6 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})})})}),(0,r.jsx)("div",{className:"ml-3",children:(0,r.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"Confirmar eliminaci\xf3n"})})]}),(0,r.jsxs)("div",{className:"mb-6",children:[(0,r.jsxs)("p",{className:"text-sm text-gray-500 mb-4",children:["\xbfEst\xe1 seguro de que desea eliminar al paciente ",(0,r.jsx)("strong",{children:e.name})," (DNI: ",e.dni,")?"]}),(0,r.jsx)("p",{className:"text-sm text-red-600",children:"Esta acci\xf3n no se puede deshacer. Se eliminar\xe1n todos los datos del paciente de forma permanente."})]}),o&&(0,r.jsx)("div",{className:"mb-4 p-3 bg-red-100 border border-red-400 text-red-700 rounded",children:o}),(0,r.jsxs)("div",{className:"flex justify-end space-x-3",children:[(0,r.jsx)("button",{type:"button",onClick:a,disabled:n,className:"px-4 py-2 text-gray-700 bg-gray-200 rounded-md hover:bg-gray-300 focus:outline-none focus:ring-2 focus:ring-gray-500 disabled:opacity-50",children:"Cancelar"}),(0,r.jsx)("button",{type:"button",onClick:c,disabled:n,className:"px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-red-500 disabled:opacity-50",children:n?"Eliminando...":"Eliminar Paciente"})]})]})}):null}function E(){let[e,s]=(0,t.useState)(null),[a,i]=(0,t.useState)(!1),[o,d]=(0,t.useState)(!1),[c,u]=(0,t.useState)(!1),[x,b]=(0,t.useState)(null),[g,h]=(0,t.useState)(0),p=async e=>{try{await (0,n.Dk)(e.dni),h(e=>e+1)}catch(e){throw console.error("Error deleting patient:",e),e}};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(l.default,{}),(0,r.jsx)("div",{className:"min-h-screen bg-gray-50",children:(0,r.jsx)("div",{className:"max-w-7xl mx-auto py-6 sm:px-6 lg:px-8",children:(0,r.jsxs)("div",{className:"px-4 py-6 sm:px-0",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,r.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Pacientes"}),(0,r.jsx)("button",{onClick:()=>{d(!0)},className:"bg-hospital-blue hover:bg-hospital-blue/80 text-white font-medium py-2 px-4 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2",children:"+ Registrar Nuevo Paciente"})]}),(0,r.jsx)(m,{onPatientDetails:e=>{console.log("handlePatientDetails called:",e.name),s(e),i(!0)},refreshTrigger:g,onPatientDelete:e=>{b(e),u(!0)}})]})})}),(0,r.jsx)(N,{patient:e,isOpen:a,onClose:()=>{console.log("handleCloseDetails called"),i(!1),s(null)},onPatientUpdate:e=>{s(e),h(e=>e+1)}}),(0,r.jsx)(C,{isOpen:o,onClose:()=>{d(!1)},onPatientCreated:()=>{h(e=>e+1)}}),(0,r.jsx)(_,{patient:x,isOpen:c,onClose:()=>{u(!1),b(null)},onConfirm:p})]})}}},e=>{e.O(0,[965,545,404,665,458,157,441,964,358],()=>e(e.s=33)),_N_E=e.O()}]);