"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[458],{1458:(e,t,s)=>{s.d(t,{default:()=>m});var r=s(5155),a=s(5699),n=s(5630),i=s(9598),o=s(4500),l=s(5695),c=s(8887);let u=[{name:"Nuestro Equipo",href:"/team",current:!1},{name:"Pacientes",href:"/patients",current:!1},{name:"Admisiones",href:"/admissions",current:!1}],d=[{name:"Nuestro Equipo",href:"/team",current:!1}];function h(...e){return e.filter(Boolean).join(" ")}function m(){let e=(0,l.usePathname)(),t=(0,l.useRouter)(),{user:s,doctor:m,logout:f}=(0,c.A)(),x=d.map(t=>({...t,current:e===t.href})),p=u.map(t=>({...t,current:e===t.href})),b=()=>{t.push("/login")},g=async()=>{await f(),t.push("/")};return(0,r.jsxs)(a.EN,{as:"nav",className:"relative bg-hospital-blue",children:[(0,r.jsx)("div",{className:"mx-auto max-w-7xl px-2 sm:px-6 lg:px-8",children:(0,r.jsxs)("div",{className:"relative flex h-16 items-center justify-between",children:[(0,r.jsx)("div",{className:"absolute inset-y-0 left-0 flex items-center sm:hidden",children:(0,r.jsxs)(a._q,{className:"group relative inline-flex items-center justify-center rounded-md p-2 text-gray-400 hover:bg-white/5 hover:text-white focus:outline-2 focus:-outline-offset-1 focus:outline-[#4fbbeb]",children:[(0,r.jsx)("span",{className:"absolute -inset-0.5"}),(0,r.jsx)("span",{className:"sr-only",children:"Open main menu"}),(0,r.jsx)(i.A,{"aria-hidden":"true",className:"block size-6 group-data-open:hidden"}),(0,r.jsx)(o.A,{"aria-hidden":"true",className:"hidden size-6 group-data-open:block"})]})}),(0,r.jsxs)("div",{className:"flex flex-1 items-center justify-center sm:items-stretch sm:justify-start",children:[(0,r.jsx)("div",{className:"flex shrink-0 items-center",children:(0,r.jsx)("img",{alt:"Hospital General de Real",src:"/hosp-title-wh.png",className:"h-8 w-auto cursor-pointer",onClick:()=>t.push("/")})}),(0,r.jsx)("div",{className:"hidden sm:ml-6 sm:block",children:(0,r.jsx)("div",{className:"flex space-x-4",children:s?p.map(e=>(0,r.jsx)("a",{href:e.href,"aria-current":e.current?"page":void 0,className:h(e.current?"bg-hospital-blue/80 text-white":"text-gray-300 hover:bg-white/5 hover:text-white","rounded-md px-3 py-2 text-md font-medium"),children:e.name},e.name)):x.map(e=>(0,r.jsx)("a",{href:e.href,"aria-current":e.current?"page":void 0,className:h(e.current?"bg-hospital-blue/80 text-white":"text-gray-300 hover:bg-white/5 hover:text-white","rounded-md px-3 py-2 text-md font-medium"),children:e.name},e.name))})})]}),(0,r.jsx)("div",{className:"absolute inset-y-0 right-0 flex items-center pr-2 sm:static sm:inset-auto sm:ml-6 sm:pr-0",children:s?(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)(n.W1,{as:"div",className:"relative ml-3",children:[(0,r.jsxs)(n.IU,{className:"relative flex items-center space-x-2 rounded-md px-3 py-2 text-white hover:bg-white/10 focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-[#4fbbeb]",children:[(0,r.jsx)("span",{className:"absolute -inset-1.5"}),(0,r.jsx)("span",{className:"sr-only",children:"Open user menu"}),m&&(0,r.jsxs)("div",{className:"flex flex-col items-start",children:[(0,r.jsx)("div",{className:"font-semibold text-sm",children:m.name}),(0,r.jsxs)("div",{className:"text-xs text-gray-300",children:["DNI: ",m.dni]})]})]}),(0,r.jsxs)(n.c,{transition:!0,className:"absolute right-0 z-10 mt-2 w-48 origin-top-right rounded-md bg-white py-1 shadow-lg outline outline-black/5 transition data-closed:scale-95 data-closed:transform data-closed:opacity-0 data-enter:duration-100 data-enter:ease-out data-leave:duration-75 data-leave:ease-in",children:[m&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.Dr,{children:(0,r.jsxs)("div",{className:"block px-4 py-2 text-sm text-gray-700",children:[(0,r.jsx)("div",{className:"font-medium",children:m.name}),(0,r.jsxs)("div",{className:"text-gray-500",children:["DNI: ",m.dni]})]})}),(0,r.jsx)("div",{className:"border-t border-gray-100 my-1"})]}),(0,r.jsx)(n.Dr,{children:(0,r.jsx)("button",{onClick:g,className:"block w-full text-left px-4 py-2 text-sm text-gray-700 data-focus:bg-gray-100 data-focus:outline-hidden",children:"Cerrar sesi\xf3n"})})]})]})}):(0,r.jsx)("button",{onClick:b,className:"rounded-md bg-white px-3 py-2 text-sm font-semibold text-gray-800 shadow-sm hover:bg-gray-100 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-[#4fbbeb]",children:"Iniciar sesi\xf3n"})})]})}),(0,r.jsx)(a.kS,{className:"sm:hidden",children:(0,r.jsxs)("div",{className:"space-y-1 px-2 pt-2 pb-3",children:[x.map(e=>(0,r.jsx)(a._q,{as:"a",href:e.href,"aria-current":e.current?"page":void 0,className:h(e.current?"bg-hospital-blue/80 text-white":"text-gray-300 hover:bg-white/5 hover:text-white","block rounded-md px-3 py-2 text-base font-medium"),children:e.name},e.name)),!s&&(0,r.jsx)("div",{className:"pt-4 pb-3 border-t border-gray-700",children:(0,r.jsx)("button",{onClick:b,className:"w-full rounded-md bg-indigo-600 px-3 py-2 text-sm font-semibold text-white shadow-sm hover:bg-indigo-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-[#4fbbeb]",children:"Iniciar sesi\xf3n"})})]})})]})}},5731:(e,t,s)=>{s.d(t,{AL:()=>h,BF:()=>p,Dk:()=>c,H2:()=>i,L5:()=>l,WB:()=>u,_m:()=>f,h$:()=>o,kE:()=>x,wt:()=>d,xL:()=>m});var r=s(7223);let a=s(9509).env.NEXT_PUBLIC_API_URL||"http://localhost:8000";async function n(){let e=0;for(;e<10;){let t=r.j.currentUser;if(t)try{let e=await t.getIdToken();return console.log("Auth token obtained successfully"),e}catch(e){return console.error("Error getting auth token:",e),null}await new Promise(e=>setTimeout(e,100)),e++}return console.warn("No user found after waiting for auth to initialize"),null}async function i(e,t={}){let s=await n(),r={"Content-Type":"application/json",...t.headers};s?(r.Authorization=`Bearer ${s}`,console.log(`API call to ${e} with auth token`)):console.warn(`No authentication token available for API call to: ${e}`);let o=`${a}${e}`;console.log("Making API call to:",o,"with token:",s?"Present":"Missing");let l=await fetch(o,{...t,headers:r});if(!l.ok){let t=`API call failed: ${l.status} ${l.statusText}`;console.error(t,"for endpoint:",e);try{let e=await l.text();console.error("Error response body:",e)}catch(e){console.error("Could not read error response body")}throw Error(t)}return l.json()}async function o(){return i("/doctor/me")}async function l(){return i("/patients/")}async function c(e){return i(`/patients/${e}`,{method:"DELETE"})}async function u(e){return i("/patients/",{method:"POST",body:JSON.stringify({...e,phone:e.phone||"",allergies:e.allergies||"",medical_notes:e.medical_notes||"",notes:e.notes||""})})}async function d(e){return i(`/visit/${e}`)}async function h(e){return i(`/visit/info/${e}`)}async function m(e,t){return i(`/visit/${e}`,{method:"PUT",body:JSON.stringify(t)})}async function f(e){return i("/visit/",{method:"POST",body:JSON.stringify(e)})}async function x(e){return i(`/visit/${e}/discharge`,{method:"PUT"})}async function p(){return i("/patients/admitted")}},7223:(e,t,s)=>{s.d(t,{j:()=>i});var r=s(3915),a=s(5404);let n=(0,r.Wp)({apiKey:"AIzaSyDEENgDXYMxIgTPwEFbyRhw8z9JKd3BP_o",authDomain:"real-hospital-app.firebaseapp.com",projectId:"real-hospital-app",storageBucket:"real-hospital-app.firebasestorage.app",messagingSenderId:"1089927476854",appId:"1:1089927476854:web:dd6373267ceeefcfcdd157"}),i=(0,a.xI)(n)},8887:(e,t,s)=>{s.d(t,{A:()=>d,AuthProvider:()=>u});var r=s(5155),a=s(2115),n=s(5404),i=s(7223),o=s(5731),l=s(5695);let c=(0,a.createContext)(void 0);function u({children:e}){let[t,s]=(0,a.useState)(null),[u,d]=(0,a.useState)(null),[h,m]=(0,a.useState)(!0),f=(0,l.useRouter)();(0,a.useEffect)(()=>{let e=(0,n.hg)(i.j,async e=>{if(e)try{let e=await (0,o.h$)();d(e)}catch(e){console.error("Error fetching doctor data:",e),(e.message?.includes("401")||e.message?.includes("Unauthorized"))&&console.error("Authentication failed for doctor data. User may need to re-authenticate."),d(null)}else d(null);setTimeout(()=>{s(e),m(!1)},500)});return()=>e()},[]);let x=async(e,t)=>{try{await (0,n.x9)(i.j,e,t).then(()=>{f.push("/")})}catch(e){throw console.error("Error signing in:",e),e}},p=async(e,t)=>{try{await (0,n.eJ)(i.j,e,t)}catch(e){throw console.error("Error signing up:",e),e}},b=async()=>{try{await (0,n.CI)(i.j),d(null)}catch(e){console.error("Error signing out:",e)}};return(0,r.jsx)(c.Provider,{value:{user:t,doctor:u,loading:h,logout:b,signIn:x,signUp:p},children:e})}function d(){let e=(0,a.useContext)(c);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}}}]);